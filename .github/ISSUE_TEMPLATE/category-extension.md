---
name: 服カテゴリーの拡張・変更機能
about: 服のカテゴリーを動的に追加・編集・削除できる機能を実装する
title: '[Feature] 服カテゴリーの拡張・変更機能'
labels: enhancement, future
assignees: ''
---

## 概要
現在は固定の4カテゴリー（トップス、ボトムス、靴、アクセサリー）のみだが、ユーザーが自由にカテゴリーを追加・編集・削除できる機能を実装する。

## 背景
服に見識がある人たちからのフィードバックを受けて、カテゴリーの拡張や変更が必要になる可能性がある。現在のEnum型では柔軟な対応が難しいため、動的なカテゴリー管理機能が必要。

## 実装内容

### 1. データベーススキーマの変更
- [ ] `clothing_categories`テーブルの作成
  - id, name, display_order, created_at, updated_at
- [ ] Enumから外部キー参照への移行
- [ ] マイグレーション戦略の策定（既存データの移行）

### 2. カテゴリー管理UI
- [ ] カテゴリー一覧画面
- [ ] カテゴリー追加フォーム
- [ ] カテゴリー編集機能
- [ ] カテゴリー削除機能（使用中のカテゴリーは削除不可）
- [ ] カテゴリーの並び順変更（ドラッグ&ドロップ）

### 3. 既存機能への影響
- [ ] 服アイテム登録時のカテゴリー選択
- [ ] コーディネート作成時のカテゴリー表示
- [ ] フィルタリング機能の更新

### 4. バリデーション
- [ ] カテゴリー名の重複チェック
- [ ] 使用中のカテゴリー削除の防止
- [ ] カテゴリー名の文字数制限

## 技術的考慮事項
- 既存データの移行方法
- パフォーマンスへの影響（JOIN増加）
- キャッシュ戦略
- デフォルトカテゴリーの保護

## マイグレーション計画
1. 新しい`clothing_categories`テーブルを作成
2. 既存の4カテゴリーをテーブルに挿入
3. `clothing_items`と`outfit_items`のカテゴリーカラムを外部キー参照に変更
4. 既存データのマイグレーション
5. Enumの削除
