$schema: 'https://moonrepo.dev/schemas/project.json'

language: 'typescript'
type: 'application'

dependsOn:
  - id: 'db'
    scope: 'production'

tasks:
  dev:
    command: 'pnpm dev'
    local: true
    options:
      runInCI: false

  build:
    command: 'pnpm build'
    inputs:
      - 'src/**/*'
      - 'public/**/*'
      - 'next.config.ts'
      - 'tsconfig.json'
    outputs:
      - '.next/**/*'

  start:
    command: 'pnpm start'
    local: true
    deps:
      - '~:build'

  lint:
    command: 'pnpm lint'
    inputs:
      - 'src/**/*'

  format:
    command: 'pnpm format'
    inputs:
      - 'src/**/*'
